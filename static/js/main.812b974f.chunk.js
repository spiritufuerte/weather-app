(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{25:function(e,t,r){},26:function(e,t,r){},27:function(e,t,r){},46:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(3),c=r.n(a),s=r(18),u=r.n(s),o=(r(25),r(26),r(2)),i=r.n(o),l=r(4),p=r(8),h=(r(27),r(6)),d=r.n(h);function j(e){return new Promise((function(t,r){var n="city/".concat(e),a=localStorage.getItem(n);a?t(JSON.parse(a)):d.a.fromAddress(e).then((function(e){var r=e.results[0].geometry.location;localStorage.setItem(n,JSON.stringify(r)),t(r)}),(function(e){console.error(e),r(e)}))}))}function f(e,t){return new Promise((function(r,n){var a="coordinate/".concat(e,",").concat(t),c=localStorage.getItem(a);c?r(c):d.a.fromLatLng(e,t).then((function(e){var t=e.results[0].address_components[3].short_name;localStorage.setItem(a,t),r(t)}),(function(e){console.error(e),n(e)}))}))}d.a.setApiKey("AIzaSyCGzMDw4iq6loLNXllX9mIHyQdlP1kz-pg");var m=function(e){var t=e.handleSearch,r=Object(a.useRef)(null),c=function(){var e=Object(l.a)(i.a.mark((function e(n){var a,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.preventDefault(),a=r.current.value,e.next=4,j(a);case 4:c=e.sent,s=c.lat,u=c.lng,t({city:a,lat:s,lng:u});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){navigator.geolocation.getCurrentPosition(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t.coords.latitude,t.coords.longitude);case 2:return r.current.value=e.sent,e.next=5,c(null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.jsx)("form",{className:"form",onSubmit:c,children:Object(n.jsx)("div",{className:"input_wrapper",children:Object(n.jsx)("input",{type:"text",placeholder:"Search location",ref:r})})})},b=r(19),x=r.n(b).a.create({baseURL:"https://api.openweathermap.org/data/2.5"}),w=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n,a,c,s,u,o,l,p,h,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.lat,n=t.lng,a="weather/".concat(r,",").concat(n),!(c=localStorage.getItem(a))){e.next=8;break}return(s=JSON.parse(c)).currentSunrise=new Date(s.currentSunrise),s.currentSunset=new Date(s.currentSunset),e.abrupt("return",s);case 8:return e.next=10,x.get("/onecall",{params:{lat:r,lon:n,exclude:["hourly","alerts"],units:"metric",appid:"5c2e7db91be800dca337ae2f4990971f"}});case 10:return u=e.sent,o=u.data.current,l=u.data.daily[0],p=o.weather[0].icon,h=o.weather[0].description,d={currentClouds:o.clouds,currentSunrise:new Date(1e3*o.sunrise),currentSunset:new Date(1e3*o.sunset),currentTemp:o.temp,tMin:l.temp.min,tMax:l.temp.max,weatherDescription:h,weatherIcon:p},localStorage.setItem(a,JSON.stringify(d)),e.abrupt("return",d);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=r(5),O=r.n(g),v=function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),r=t[0],s=t[1],u=Object(a.useState)({currentTemp:0,tMax:null,tMin:null,currentSunset:new Date,currentSunrise:new Date,currentClouds:0,weatherIcon:"",weatherDescription:""}),o=Object(p.a)(u,2),h=o[0],d=o[1],j=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.city,n=t.lng,a=t.lat,e.next=3,w({lng:n,lat:a});case 3:c=e.sent,d(c),s(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var f=function(e){return e.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]}(new Date),b="http://openweathermap.org/img/wn/".concat(h.weatherIcon,"@2x.png");return Object(n.jsxs)("div",{className:O.a.main,children:[Object(n.jsx)(m,{handleSearch:j}),Object(n.jsx)("div",{className:O.a.info,children:h.tMax?Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsxs)("div",{className:O.a.location,children:[Object(n.jsx)("h1",{children:r}),Object(n.jsx)("h2",{children:f}),Object(n.jsx)("img",{src:b}),Object(n.jsxs)("p",{children:["Weather condition: ",h.weatherDescription]})]}),Object(n.jsxs)("div",{className:O.a.weather_wrapper,children:[Object(n.jsxs)("p",{children:["Temperature now: ",h.currentTemp," \xb0C"]}),Object(n.jsxs)("p",{children:["Min temperature today: ",h.tMin," \xb0C"]}),Object(n.jsxs)("p",{children:["Max temperature today: ",h.tMax," \xb0C"]}),Object(n.jsxs)("p",{children:["Sunset: ",h.currentSunset.getHours(),":",h.currentSunset.getMinutes()]}),Object(n.jsxs)("p",{children:["Sunrise: ",h.currentSunrise.getHours(),":",h.currentSunrise.getMinutes()]}),Object(n.jsxs)("p",{children:["Clouds: ",h.currentClouds,"%"]})]})]}):Object(n.jsx)("h1",{children:" Wait"})})]})};var S=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(v,{})})};u.a.render(Object(n.jsx)(S,{}),document.getElementById("root"))},5:function(e,t,r){e.exports={main:"Weather_main__NSguF",info:"Weather_info__2SvvV",location:"Weather_location__16PT4",weather_wrapper:"Weather_weather_wrapper__c0XW9"}}},[[46,1,2]]]);
//# sourceMappingURL=main.812b974f.chunk.js.map